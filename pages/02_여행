# streamlit_seoul_top10.py
import streamlit as st
import folium
from streamlit_folium import st_folium
from folium.plugins import MarkerCluster

st.set_page_config(page_title="Seoul: Top 10 Tourist Spots", layout="wide")

st.title("ğŸ—ºï¸ ì™¸êµ­ì¸ë“¤ì´ ì¢‹ì•„í•˜ëŠ” ì„œìš¸ ê´€ê´‘ì§€ TOP 10")
st.write("ì„œìš¸ì˜ ì¸ê¸° ê´€ê´‘ì§€ë¥¼ ì§€ë„ì—ì„œ í•œëˆˆì— ë³¼ ìˆ˜ ìˆì–´ìš”! ì„ íƒí•˜ë©´ í•´ë‹¹ ìœ„ì¹˜ë¡œ ë°”ë¡œ ì´ë™í•©ë‹ˆë‹¤ ğŸ‘‡")

# ê´€ê´‘ì§€ ì •ë³´
PLACES = [
    {"name": "ê²½ë³µê¶", "lat": 37.579884, "lon": 126.9768, "desc": "ì¡°ì„ ì‹œëŒ€ì˜ ëŒ€í‘œì ì¸ ê¶ê¶"},
    {"name": "ì°½ë•ê¶", "lat": 37.57944, "lon": 126.99278, "desc": "ìœ ë„¤ìŠ¤ì½” ì„¸ê³„ë¬¸í™”ìœ ì‚°, ë¹„ë°€ì˜ ì •ì›ìœ¼ë¡œ ìœ ëª…"},
    {"name": "ë¶ì´Œí•œì˜¥ë§ˆì„", "lat": 37.582178, "lon": 126.983256, "desc": "ì „í†µ í•œì˜¥ì´ ì˜ ë³´ì¡´ëœ ë§ˆì„"},
    {"name": "ì¸ì‚¬ë™", "lat": 37.5727, "lon": 126.9869, "desc": "ì „í†µ ê³µì˜ˆí’ˆ, ì°»ì§‘ ê±°ë¦¬"},
    {"name": "ëª…ë™", "lat": 37.564, "lon": 126.985, "desc": "ì‡¼í•‘ê³¼ ê¸¸ê±°ë¦¬ ìŒì‹ì˜ ì¤‘ì‹¬ì§€"},
    {"name": "ë‚¨ì‚° Nì„œìš¸íƒ€ì›Œ", "lat": 37.55117, "lon": 126.988228, "desc": "ì„œìš¸ì˜ ëœë“œë§ˆí¬ ì „ë§ëŒ€"},
    {"name": "í™ëŒ€", "lat": 37.55528, "lon": 126.92333, "desc": "ì ŠìŒê³¼ ì˜ˆìˆ ì˜ ê±°ë¦¬"},
    {"name": "ë™ëŒ€ë¬¸ë””ìì¸í”Œë¼ì (DDP)", "lat": 37.5669, "lon": 127.0094, "desc": "ë¯¸ë˜ì ì¸ ê±´ì¶•ë¬¼, ë””ìì¸ ì „ì‹œ ì¤‘ì‹¬"},
    {"name": "ë¡¯ë°ì›”ë“œíƒ€ì›Œ", "lat": 37.512779, "lon": 127.10257, "desc": "123ì¸µ ì´ˆê³ ì¸µ ëœë“œë§ˆí¬"},
    {"name": "ì´íƒœì›", "lat": 37.533, "lon": 126.983, "desc": "ë‹¤ë¬¸í™” ê±°ë¦¬, ì™¸êµ­ì¸ ì¸ê¸° ì§€ì—­"},
]

# ì‚¬ì´ë“œë°”
st.sidebar.header("ğŸ§­ ê´€ê´‘ì§€ ì„ íƒ")
options = ["ì„œìš¸ ì¤‘ì‹¬"] + [p["name"] for p in PLACES]
selected = st.sidebar.selectbox("ì§€ë„ë¥¼ ì´ë™í•  ì¥ì†Œë¥¼ ì„ íƒí•˜ì„¸ìš”:", options)

# ì§€ë„ ì¤‘ì‹¬ ì¢Œí‘œ
if selected == "ì„œìš¸ ì¤‘ì‹¬":
    center = (37.5665, 126.9780)
    zoom = 12
else:
    p = next(item for item in PLACES if item["name"] == selected)
    center = (p["lat"], p["lon"])
    zoom = 15

# ì§€ë„ ìƒì„±
m = folium.Map(location=center, zoom_start=zoom)
cluster = MarkerCluster().add_to(m)

for p in PLACES:
    popup_html = f"<b>{p['name']}</b><br>{p['desc']}<br><a href='https://www.google.com/maps?q={p['lat']},{p['lon']}' target='_blank'>Google Maps ë³´ê¸°</a>"
    folium.Marker(
        location=(p["lat"], p["lon"]),
        popup=popup_html,
        tooltip=p["name"]
    ).add_to(cluster)

# Streamlitì— í‘œì‹œ
st_data = st_folium(m, width=900, height=600)

# ê´€ê´‘ì§€ ë¦¬ìŠ¤íŠ¸
st.subheader("ğŸ“ TOP 10 ê´€ê´‘ì§€ ëª©ë¡")
for i, p in enumerate(PLACES, start=1):
    st.markdown(f"**{i}. {p['name']}** â€” {p['desc']}")

